# protocol-designer-to-py
A tool to convert JSON file generated by Opentrons' official Protocol Designer to python script for OT-2.
# How to use
1. Create protocol using Opentrons' official Protocol Designer.
2. Export JSON file.
3. Go to the directory containing the python script, "pdjson2py.py".
4. type below:
```
$ python3 pdjson2py.py file/path/to/protocol/designer/json/file
```
5. Then the python script, "output.py" will be generated in the directory.
6. By default, the script selects tips based on the "commands" object within the JSON file. This could lead to an unexpected order of tip selection when modifying the output Python file. To mitigate this, use the "auto" argument. This removes pre-defined tip locations and allows the automatic assignment of tipracks from the initial deck state in the Protocol Designer to the pipettes.
```
$ python3 pdjson2py.py /path/to/protocol/designer/json/file auto
```
7.	Alternatively, you can specify a used tiprack by indicating the starting well associated with either the left or right pipette.
```
# For two pipettes, specify the wells in the format [left pipette]/[right pipette]. No blanks are allowed. Use 'A1' if the left pipette uses a new tiprack.
$ python3 pdjson2py.py /path/to/protocol/designer/json/file A1/C3

# For single pipette usage (left/right unspecified), specify the well as follows:
$ python3 pdjson2py.py /path/to/protocol/designer/json/file B10
```
8. A Slack notification feature is available when you include the Slack webhook URL as the third argument. In this case, the second argument should be either 'auto', 'None', or any string other than 'auto'.
```
$ python3 pdjson2py.py file/path/to/protocol/designer/json/file None https://hooks.slack.com/services/[YOUR]/[WEBHOOK]/[URL]
```

# Limitations
* Not all of parameters are supported, but to be supported in future.
* Only API version 2.13 is and will be supported, but not restricted. (liquid status is not supported)
* Transfer in Commands object of JSON file is expressed as a combination of aspriate and dispense. The generated python file keeps the structure. Same to single cycle long profile in thermocycler.
* Note that all Slack notification in the protocol will be sent immediately upon importing the protocol file into the Opentrons app. This is because the app validates (simulates) the protocol once before the setup process begins.
* Bug reports are welcome to improve the script.
